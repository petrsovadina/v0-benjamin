{
  "file_path": "backend/data_processing/parsers/auxiliary_parser.py",
  "main_branch_history": [],
  "task_views": {
    "001-complete-guidelines-rag-pdf-import": {
      "task_id": "001-complete-guidelines-rag-pdf-import",
      "branch_point": {
        "commit_hash": "d092d181e511c0ef7a36dcfd2dfe3f083cbae73e",
        "content": "",
        "timestamp": "2025-12-25T01:35:52.079046"
      },
      "worktree_state": {
        "content": "import pandas as pd\nfrom typing import List, Dict, Any\nimport logging\n\nlogger = logging.getLogger(__name__)\n\nclass AuxiliaryParser:\n    \"\"\"\n    Parses auxiliary S\u00daKL CSV files like ATC codes and Active Substances.\n    \"\"\"\n    \n    def parse_atc(self, file_path: str) -> Dict[str, str]:\n        \"\"\"\n        Parses dlp_atc.csv to map ATC_CODE -> ATC_NAME_CS.\n        Format: ATC;NT;NAZEV;NAZEV_EN\n        Returns: Dict[atc_code, atc_name]\n        \"\"\"\n        logger.info(f\"Parsing ATC file: {file_path}\")\n        try:\n            df = pd.read_csv(file_path, encoding=\"cp1250\", delimiter=\";\")\n            mapping = {}\n            for _, row in df.iterrows():\n                code = row.get(\"ATC\", \"\")\n                name = row.get(\"NAZEV\", row.get(\"NAZEV_EN\", \"\"))\n                if code and name:\n                    mapping[str(code).strip()] = str(name).strip()\n            \n            logger.info(f\"Parsed {len(mapping)} ATC codes.\")\n            return mapping\n        except Exception as e:\n            logger.error(f\"Error parsing ATC file: {e}\")\n            return {}\n\n    def parse_substances(self, file_path: str) -> List[Dict[str, Any]]:\n        \"\"\"\n        Parses dlp_latky.csv.\n        Format: KOD_LATKY;...;NAZEV_INN;NAZEV_EN;NAZEV;...\n        \"\"\"\n        logger.info(f\"Parsing Substances file: {file_path}\")\n        try:\n            df = pd.read_csv(file_path, encoding=\"cp1250\", delimiter=\";\")\n            items = []\n            for _, row in df.iterrows():\n                item = {\n                    \"kod_latky\": str(row.get(\"KOD_LATKY\", \"\")),\n                    \"nazev_inn\": row.get(\"NAZEV_INN\", \"\"),\n                    \"nazev_en\": row.get(\"NAZEV_EN\", \"\"),\n                    \"nazev_cs\": row.get(\"NAZEV\", \"\")\n                }\n                items.append(item)\n            \n            logger.info(f\"Parsed {len(items)} active substances.\")\n            return items\n        except Exception as e:\n            logger.error(f\"Error parsing Substances file: {e}\")\n            return []\n",
        "last_modified": "2025-12-25T21:22:14.921978"
      },
      "task_intent": {
        "title": "001-complete-guidelines-rag-pdf-import",
        "description": "",
        "from_plan": false
      },
      "commits_behind_main": 0,
      "status": "active",
      "merged_at": null
    }
  },
  "created_at": "2025-12-25T01:36:13.420665",
  "last_updated": "2025-12-25T01:36:13.434171"
}