{
  "file_path": "backend/mcp_servers/sukl_server.py",
  "main_branch_history": [],
  "task_views": {
    "001-complete-guidelines-rag-pdf-import": {
      "task_id": "001-complete-guidelines-rag-pdf-import",
      "branch_point": {
        "commit_hash": "d092d181e511c0ef7a36dcfd2dfe3f083cbae73e",
        "content": "",
        "timestamp": "2025-12-25T01:35:52.079046"
      },
      "worktree_state": {
        "content": "from mcp.server.fastmcp import FastMCP\nfrom app.core.database import get_supabase_client\nfrom typing import List, Dict, Any\n\nmcp = FastMCP(\"Czech MedAI S\u00daKL Server\")\n\n@mcp.tool()\nasync def search_drugs(query: str) -> str:\n    \"\"\"\n    Search for drugs in the S\u00daKL database by name or active substance.\n    \"\"\"\n    supabase = get_supabase_client()\n    \n    # Simple ILIKE search for MVP, ensuring we have 'drugs' table\n    # Note: Real implementation might use vector search if embeddings are ready\n    response = supabase.table(\"drugs\").select(\"*\").or_(f\"nazev.ilike.%{query}%,ucinna_latka.ilike.%{query}%\").limit(10).execute()\n    \n    return str(response.data)\n\n@mcp.tool()\nasync def get_drug_details(sukl_code: str) -> str:\n    \"\"\"\n    Get detailed information about a drug by its S\u00daKL code.\n    \"\"\"\n    supabase = get_supabase_client()\n    response = supabase.table(\"drugs\").select(\"*\").eq(\"sukl_kod\", sukl_code).single().execute()\n    return str(response.data)\n\nif __name__ == \"__main__\":\n    mcp.run()\n",
        "last_modified": "2025-12-25T21:22:15.332743"
      },
      "task_intent": {
        "title": "001-complete-guidelines-rag-pdf-import",
        "description": "",
        "from_plan": false
      },
      "commits_behind_main": 0,
      "status": "active",
      "merged_at": null
    }
  },
  "created_at": "2025-12-25T01:36:13.770307",
  "last_updated": "2025-12-25T01:36:13.783074"
}