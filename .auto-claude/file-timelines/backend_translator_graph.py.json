{
  "file_path": "backend/translator_graph.py",
  "main_branch_history": [],
  "task_views": {
    "001-complete-guidelines-rag-pdf-import": {
      "task_id": "001-complete-guidelines-rag-pdf-import",
      "branch_point": {
        "commit_hash": "d092d181e511c0ef7a36dcfd2dfe3f083cbae73e",
        "content": "",
        "timestamp": "2025-12-25T01:35:52.079046"
      },
      "worktree_state": {
        "content": "from typing import TypedDict, List\nfrom langchain_core.messages import BaseMessage, HumanMessage\nfrom langgraph.graph import StateGraph, END\nfrom langchain_anthropic import ChatAnthropic\nimport os\nfrom dotenv import load_dotenv\nfrom pathlib import Path\n\n# Load env\nenv_path = Path(__file__).resolve().parents[1] / '.env'\nload_dotenv(dotenv_path=env_path)\n\n# Define State\nclass TranslatorState(TypedDict):\n    source_text: str\n    target_language: str\n    translated_text: str\n\n# Define LLM\nllm = ChatAnthropic(\n    model=\"claude-3-haiku-20240307\",\n    temperature=0,\n    api_key=os.getenv(\"ANTHROPIC_API_KEY\")\n)\n\n# Define Node\ndef translate_node(state: TranslatorState):\n    source_text = state[\"source_text\"]\n    target_lang = state[\"target_language\"]\n    \n    system_prompt = f\"\"\"You are an expert medical translator. \n    Translate the following text into professional medical {target_lang}.\n    Ensure high accuracy for medical terminology (e.g., Latin terms, drug names, dosage instructions).\n    Maintain the tone and formatting of the original text.\n    \"\"\"\n    \n    messages = [\n        HumanMessage(content=f\"{system_prompt}\\n\\ntext:\\n{source_text}\")\n    ]\n    \n    response = llm.invoke(messages)\n    return {\"translated_text\": response.content}\n\n# Build Graph\nbuilder = StateGraph(TranslatorState)\nbuilder.add_node(\"translate\", translate_node)\nbuilder.set_entry_point(\"translate\")\nbuilder.add_edge(\"translate\", END)\n\napp = builder.compile()\n",
        "last_modified": "2025-12-25T21:22:15.402320"
      },
      "task_intent": {
        "title": "001-complete-guidelines-rag-pdf-import",
        "description": "",
        "from_plan": false
      },
      "commits_behind_main": 0,
      "status": "active",
      "merged_at": null
    }
  },
  "created_at": "2025-12-25T01:36:14.374869",
  "last_updated": "2025-12-25T01:36:14.388423"
}