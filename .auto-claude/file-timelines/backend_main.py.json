{
  "file_path": "backend/main.py",
  "main_branch_history": [],
  "task_views": {
    "001-complete-guidelines-rag-pdf-import": {
      "task_id": "001-complete-guidelines-rag-pdf-import",
      "branch_point": {
        "commit_hash": "d092d181e511c0ef7a36dcfd2dfe3f083cbae73e",
        "content": "",
        "timestamp": "2025-12-25T01:35:52.079046"
      },
      "worktree_state": {
        "content": "from fastapi import FastAPI, Request\nfrom fastapi.middleware.cors import CORSMiddleware\nfrom dotenv import load_dotenv\n\nfrom backend.services.logger import get_logger\nfrom slowapi import Limiter, _rate_limit_exceeded_handler\nfrom slowapi.util import get_remote_address\nfrom slowapi.errors import RateLimitExceeded\nfrom contextlib import asynccontextmanager\nfrom backend.services.cache import cache\n\nfrom backend.app.api.v1.api import api_router\n\n# Load environment variables\nload_dotenv()\n\n# Initialize Logger\nlogger = get_logger(__name__)\n\n# Initialize Rate Limiter\nlimiter = Limiter(key_func=get_remote_address)\n\n@asynccontextmanager\nasync def lifespan(app: FastAPI):\n    # Startup\n    logger.info(\"Backend service starting up\")\n    yield\n    # Shutdown\n    stats = cache.get_stats()\n    logger.info(\"Backend service shutting down\", cache_stats=stats)\n\napp = FastAPI(\n    title=\"Czech MedAI Backend\",\n    description=\"API for the Clinical AI Assistant\",\n    version=\"0.1.0\",\n    lifespan=lifespan\n)\n\n# Register Rate Limit Handler\napp.state.limiter = limiter\napp.add_exception_handler(RateLimitExceeded, _rate_limit_exceeded_handler)\n\n# Configure CORS\napp.add_middleware(\n    CORSMiddleware,\n    allow_origins=[\"http://localhost:3000\"],\n    allow_credentials=True,\n    allow_methods=[\"*\"],\n    allow_headers=[\"*\"],\n)\n\n# Mount API Router\napp.include_router(api_router, prefix=\"/api/v1\")\n\n@app.get(\"/\")\nasync def root():\n    return {\"status\": \"ok\", \"service\": \"Czech MedAI Backend\"}\n\n@app.get(\"/health\")\nasync def health_check():\n    return {\"status\": \"healthy\"}\n",
        "last_modified": "2025-12-25T21:22:15.329262"
      },
      "task_intent": {
        "title": "001-complete-guidelines-rag-pdf-import",
        "description": "",
        "from_plan": false
      },
      "commits_behind_main": 0,
      "status": "active",
      "merged_at": null
    }
  },
  "created_at": "2025-12-25T01:36:13.742218",
  "last_updated": "2025-12-25T01:36:13.755001"
}