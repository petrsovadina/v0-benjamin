=== AUTO-BUILD PROGRESS ===

Project: E2E Test Suite for MedAI
Spec: 007-testy
Started: 2025-12-26

Workflow Type: feature
Rationale: This is a new feature implementation that adds comprehensive E2E testing infrastructure. No existing E2E tests or Playwright configuration exists, requiring setup from scratch plus test creation for all four critical user flows.

Session 1 (Planner):
- Created implementation_plan.json
- Phases: 6
- Total subtasks: 8
- Created init.sh

=== PHASE SUMMARY ===

Phase 1 - Playwright Setup (2 subtasks)
  - Install Playwright and configure playwright.config.ts
  - Create test fixtures and shared test data
  Dependencies: None

Phase 2 - Authentication Setup (1 subtask)
  - Create auth.setup.ts for session persistence
  Dependencies: phase-1-setup

Phase 3 - Authentication Tests (1 subtask) [PARALLELIZABLE]
  - Create auth.spec.ts with login/logout tests
  Dependencies: phase-2-auth-setup

Phase 4 - AI Chat Tests (1 subtask) [PARALLELIZABLE]
  - Create chat.spec.ts with message flow tests
  Dependencies: phase-2-auth-setup

Phase 5 - Drug Search and VZP Tests (2 subtasks) [PARALLELIZABLE]
  - Create drug-search.spec.ts with SUKL mocking
  - Create vzp-navigator.spec.ts with VZP flow tests
  Dependencies: phase-2-auth-setup

Phase 6 - CI Integration (2 subtasks)
  - Create e2e.yml GitHub Actions workflow
  - Run full E2E test suite verification
  Dependencies: phase-3, phase-4, phase-5

=== SERVICES INVOLVED ===

- main (Next.js frontend): Primary service for E2E tests
  - Port: 3000
  - Dev command: npm run dev
  - All test files created here

- backend (FastAPI, integration only): API endpoints to mock
  - Port: 8000
  - No modifications, only API mocking in tests

=== PARALLELISM ANALYSIS ===

Max parallel phases: 3
Recommended workers: 2
Parallel groups:
  - [phase-3, phase-4, phase-5] can run together after phase-2
  - Each creates separate test files with no conflicts

Speedup estimate: 1.5x faster than sequential

=== KEY FILES TO CREATE ===

Configuration:
- playwright.config.ts (Playwright configuration with webServer)

Test Files:
- e2e/auth.setup.ts (Authentication session persistence)
- e2e/auth.spec.ts (Login/logout tests)
- e2e/chat.spec.ts (AI chat interface tests)
- e2e/drug-search.spec.ts (SUKL data tests)
- e2e/vzp-navigator.spec.ts (VZP verification tests)
- e2e/fixtures/test-data.ts (Shared mock data)

CI/CD:
- .github/workflows/e2e.yml (GitHub Actions E2E workflow)

=== CRITICAL PATTERNS TO FOLLOW ===

Authentication:
- Use storageState pattern for session persistence
- Login selectors: #email, #password, button "Přihlásit se"
- Wait for redirect: /auth/login → /dashboard

API Mocking:
- Chat API: POST /api/v1/query
- VZP Search: POST /api/v1/drugs/vzp-search
- Use page.route() for mocking

Czech Language:
- All assertions must use Czech text
- "Přihlásit se", "Odeslat", "Vyhledat", etc.

=== STARTUP COMMAND ===

To continue building this spec, run:

  source auto-claude/.venv/bin/activate && python auto-claude/run.py --spec 007 --parallel 2

=== VERIFICATION CRITERIA ===

- All E2E tests pass: npx playwright test
- Auth persistence works between tests
- API mocking comprehensive (no real external calls)
- Czech language assertions match UI
- No console errors during execution
- Test execution time < 5 minutes

=== END SESSION 1 ===
