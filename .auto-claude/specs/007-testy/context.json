{
  "task_description": "Implement comprehensive E2E test suite for MedAI, a Czech medical application built with Next.js and Supabase. Cover four critical user flows: authentication, AI chat, drug search (SUKL), and VZP verification.",
  "scoped_services": ["main"],
  "files_to_modify": [
    "package.json",
    ".gitignore"
  ],
  "files_to_create": [
    "playwright.config.ts",
    "e2e/auth.setup.ts",
    "e2e/auth.spec.ts",
    "e2e/chat.spec.ts",
    "e2e/drug-search.spec.ts",
    "e2e/vzp-navigator.spec.ts",
    "e2e/fixtures/test-data.ts",
    ".github/workflows/e2e.yml"
  ],
  "files_to_reference": [
    "lib/auth-actions.ts",
    "components/auth/login-form.tsx",
    "components/dashboard/chat-interface.tsx",
    "components/dashboard/vzp-search-interface.tsx",
    "components/dashboard/vzp-result-card.tsx",
    ".github/workflows/ci.yml"
  ],
  "patterns": {
    "authentication": {
      "description": "Supabase SSR auth with server actions using redirect()",
      "login_flow": "/auth/login -> /dashboard",
      "logout_flow": "/dashboard -> /auth/login",
      "selectors": {
        "email": "#email",
        "password": "#password",
        "submit": "button[type='submit']",
        "submit_text": "Přihlásit se",
        "error_container": ".bg-destructive/10"
      }
    },
    "chat_interface": {
      "description": "Chat component calls backend API with Bearer token",
      "api_endpoint": "POST ${NEXT_PUBLIC_API_URL}/api/v1/query",
      "initial_greeting": "Ahoj! Jsem Czech MedAI",
      "selectors": {
        "input_placeholder": "Zadejte svůj klinický dotaz...",
        "submit_text": "Odeslat"
      }
    },
    "vzp_search": {
      "description": "VZP Navigator searches drugs via backend API",
      "api_endpoint": "POST ${NEXT_PUBLIC_API_URL}/api/v1/drugs/vzp-search",
      "selectors": {
        "input_placeholder": "Vyhledejte lék",
        "submit_text": "Vyhledat",
        "loading_text": "Hledám...",
        "results_text": "Nalezeno X výsledků",
        "no_results_text": "Žádné výsledky"
      }
    }
  },
  "existing_implementations": {
    "description": "No existing E2E tests. CI workflow exists for backend pytest and frontend build.",
    "relevant_files": [
      ".github/workflows/ci.yml"
    ]
  },
  "environment": {
    "frontend_port": 3000,
    "backend_port": 8000,
    "required_env_vars": [
      "NEXT_PUBLIC_SUPABASE_URL",
      "NEXT_PUBLIC_SUPABASE_ANON_KEY",
      "NEXT_PUBLIC_API_URL",
      "TEST_USER_EMAIL",
      "TEST_USER_PASSWORD"
    ]
  },
  "constraints": {
    "language": "Czech - all assertions must use Czech text",
    "mock_apis": "Must mock external APIs (SUKL, VZP) at API layer",
    "auth_state": "Use storageState pattern for session persistence",
    "no_live_apis": "Never test against live external APIs"
  },
  "created_at": "2025-12-26T03:15:41.333726",
  "updated_at": "2025-12-26T04:00:00.000000"
}
