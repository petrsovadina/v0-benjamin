{
  "task_description": "Implement comprehensive E2E testing suite for Czech MedAI covering critical user flows: authentication, AI chat, drug search (SÚKL), and VZP verification. Configure Playwright with CI/CD integration.",
  "scoped_services": ["main", "backend"],
  "files_to_modify": {
    "main": [
      "package.json",
      ".gitignore"
    ],
    "ci": [
      ".github/workflows/ci.yml"
    ]
  },
  "files_to_create": {
    "main": [
      "playwright.config.ts",
      "tests/auth.setup.ts",
      "tests/auth.spec.ts",
      "tests/chat.spec.ts",
      "tests/drug-search.spec.ts",
      "tests/vzp-verification.spec.ts"
    ],
    "ci": [
      ".github/workflows/playwright.yml"
    ]
  },
  "files_to_reference": [
    "components/auth/login-form.tsx",
    "components/dashboard/chat-interface.tsx",
    "components/dashboard/vzp-search-interface.tsx",
    "lib/auth-actions.ts",
    ".github/workflows/ci.yml"
  ],
  "patterns": {
    "login_form": {
      "email_field": "id='email', label='Email'",
      "password_field": "id='password', label='Heslo'",
      "submit_button": "text='Přihlásit se', loading='Přihlašování...'",
      "error_display": "destructive div with error message"
    },
    "chat_interface": {
      "initial_message": "Ahoj! Jsem Czech MedAI (v2.0)...",
      "input_placeholder": "Zadejte svůj klinický dotaz...",
      "send_button": "text='Odeslat'",
      "api_endpoint": "POST /api/v1/query"
    },
    "vzp_search": {
      "input_placeholder": "Vyhledejte lék (např. 'Bisoprolol', 'warfarin', 'C07AB07')...",
      "search_button": "text='Vyhledat', loading='Hledám...'",
      "result_count": "Nalezeno X výsledků",
      "empty_state": "Žádné výsledky pro...",
      "api_endpoint": "POST /api/v1/drugs/vzp-search"
    },
    "auth_flow": {
      "login_success_redirect": "/dashboard",
      "logout_redirect": "/auth/login",
      "protected_routes": ["/dashboard", "/dashboard/chat", "/dashboard/vzp-navigator"]
    },
    "ci_workflow": {
      "node_version": "18",
      "python_version": "3.11",
      "existing_jobs": ["backend-test", "frontend-build"]
    }
  },
  "existing_implementations": {
    "description": "No existing E2E tests or Playwright setup. Backend has pytest tests in backend/tests/. Frontend has no test infrastructure.",
    "relevant_files": [
      "backend/tests/",
      ".github/workflows/ci.yml"
    ]
  },
  "environment_variables": {
    "required_for_tests": [
      "NEXT_PUBLIC_SUPABASE_URL",
      "NEXT_PUBLIC_SUPABASE_ANON_KEY",
      "NEXT_PUBLIC_API_URL"
    ],
    "test_credentials": [
      "TEST_USER_EMAIL",
      "TEST_USER_PASSWORD"
    ]
  },
  "api_endpoints": {
    "chat": "POST /api/v1/query",
    "drug_search": "GET /api/v1/drugs/search?q=",
    "vzp_search": "POST /api/v1/drugs/vzp-search",
    "drug_detail": "GET /api/v1/drugs/{sukl_code}"
  },
  "created_at": "2025-12-26T02:25:00.000Z"
}
